# This file was generated by running "update-rt-siteconfig".
#
# While local modifications will not be overwritten without permission,
# it is recommended the they are instead placed in 
# /etc/request-tracker3.8/RT_SiteConfig.d
#
# Note that modifications to the RT_SiteConfig.d directory won't 
# take effect until the update command mentioned above is run again.

# start /etc/request-tracker3.8/RT_SiteConfig.d/40-timezone
# dynamically find out the current timezone
my $zone = "UTC";
$zone=`/bin/cat /etc/timezone`
    if -f "/etc/timezone";
chomp $zone;
Set($Timezone, $zone);
# end   /etc/request-tracker3.8/RT_SiteConfig.d/40-timezone
# start /etc/request-tracker3.8/RT_SiteConfig.d/50-debconf
# THE BASICS:

Set($rtname, 'C2C');
Set($Organization, 'Camptocamp');

Set($CorrespondAddress , 'rt@<%=fqdn%>');
Set($CommentAddress , 'rt-comment@<%=fqdn%>');

# THE WEBSERVER:

Set($WebPath , "/rt");
Set($WebBaseURL , "http://<%=fqdn%>");


#######################
# OLD CONFIGURATION
#######################

# This is not an official RT config element, but it's used in our templates
# to get the right URL in outgoing mails
Set($WebURLExternal, "https://intranet.camptocamp.com/rt/");

# LDAP Users:

Set($WebExternalAuth , 1);
Set($WebExternalAuto , 1); 

Set($LdapServer, "ldap.c2c");
Set($LdapBase, "ou=Users,dc=ldap,dc=c2c");
Set($LdapUidAttr, "uid");
Set($LdapNameAttr, "cn");
Set($LdapMailAttr, "mail");
Set($LdapFilter, "(objectclass=person)");
Set($AutoCreateFromExternalUserInfo, 1);
Set($AutoCreate, {Privileged => 1});

# LOGGING:

Set($LogToFile, 'debug');
Set($LogDir, '/var/log/request-tracker3.8');
Set($LogToFileNamed, '<%=fqdn%>-debug.log');

Set($LogToSyslog, 'notice');

# OUTGOING MAIL

Set($SendmailPath, "/usr/sbin/sendmail");
Set($SendmailArguments, '-oi -t -fsysadmin@camptocamp.com');

# Development

#Set($DevelMode, 1);

# Homepage

#Set($HomepageComponents, [qw(QuickCreate Quicksearch MyAdminQueues MySupportQueues MyReminders  RefreshHomepage SavedSearchList StandardSearchList)]);

# Commands by mail
Set(@MailPlugins, qw(Auth::MailFrom Filter::TakeAction Auth::GnuPG) );
Set(@Plugins, qw(RT::Extension::CommandByMail) );
Set($CommandByMailStripOut, 1);

# By default, RT doesn't notify the person who performs an update, as they
# already know what they've done. If you'd like to change this behaviour,
# Set $NotifyActor to 1
#
Set($NotifyActor, 1);

# Avoid spurious user creation in simpleviewer
Set($WebNoAuthRegex, qr!^(?:/+NoAuth/|
                            /+REST/\d+\.\d+/NoAuth/|
                            /+SimpleViewer/)!x );

# ChangeLogo http://wiki.bestpractical.com/view/ChangeLogo

Set($WebImagesURL , $WebPath . "/NoAuth/images/");  # need this for below 
Set($LogoURL, $WebImagesURL . "c2c.png"); 
Set($LogoLinkURL, 'http://www.camptocamp.com'); 
Set($LogoImageURL, $WebImagesURL . "c2c.png"); 
Set($LogoAltText, "Camptocamp");

# no wysiwyg please
Set($MessageBoxRichText,0);
# mail commands
Set($UnsafeEmailCommands,1);
# gpg support
Set(%GnuPG, Enable => 1, OutgoingMessagesFormat => 'RFC');

# end   /etc/request-tracker3.8/RT_SiteConfig.d/50-debconf
# start /etc/request-tracker3.8/RT_SiteConfig.d/51-dbconfig-common
# THE DATABASE:
# generated by dbconfig-common

# map from dbconfig-common database types to their names as known by RT
my %typemap = (
    mysql   => 'mysql',
    pgsql   => 'Pg',
    sqlite3 => 'SQLite',
);
    
Set($DatabaseType, $typemap{pgsql} || "UNKNOWN");

Set($DatabaseHost, '');
Set($DatabasePort, '');

Set($DatabaseUser , 'rtuser');
Set($DatabasePassword , 'wibble');

# SQLite needs a special case, since $DatabaseName must be a full pathname
my $dbc_dbname = 'rtdb'; if ( "pgsql" eq "sqlite3" ) { Set ($DatabaseName, '' . '/' . $dbc_dbname); } else { Set ($DatabaseName, $dbc_dbname); }
# end   /etc/request-tracker3.8/RT_SiteConfig.d/51-dbconfig-common
1;
