####
##
## OLD slapd.conf - slapd-2.x needs slapd.d
##
## Migration:
## /etc/init.d/slapd stop
## rm -f /etc/ldap/slapd.d/*
## slaptest -f /etc/ldap/slapd.conf.old -F /etc/ldap/slapd.d
## chown -R openldap: /etc/ldap/slapd.d
## /etc/init.d/slapd start
##
## see http://www.zytrax.com/books/ldap/ch6/slapd-config.html
##
###

include         /etc/ldap/schema/core.schema
include         /etc/ldap/schema/cosine.schema
include         /etc/ldap/schema/nis.schema
include         /etc/ldap/schema/inetorgperson.schema
include         /etc/ldap/schema/samba.schema


pidfile         /var/run/slapd/slapd.pid

argsfile        /var/run/slapd/slapd.args

loglevel        0

modulepath      /usr/lib/ldap
moduleload      back_bdb


backend         bdb


database        bdb

suffix          "dc=ldap,dc=geste"
checkpoint 512 30
rootdn          "cn=admin,dc=ldap,dc=geste"

directory       "/var/lib/ldap"

index         uid,uidNumber,gidNumber,memberUid       eq
index         cn,mail,surname,givenname               eq,subinitial
index         sambaSID                                eq
index         sambaPrimaryGroupSID                    eq
index         sambaDomainName                         eq

lastmod         on


access to attrs=userPassword,sambaNTPassword,sambaLMPassword,sambaPwdCanChange,sambaPwdMustChange,sambaPwdLastSet,sambaAcctFlags
    by self write
    by anonymous auth
    by * none

access to dn.base="" by * read

access to * by * read

